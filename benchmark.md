# **Benchmark**

## 文件下载测试

测试文件大小：1917881613 Bytes（1.8 GB）

### 测试结果

| 实验次数 | 本程序（单位：MB/s） | HTTP（单位：MB/s） | FTPs（单位：MB/s） |
| -------- | -------------------- | ------------------ | ------------------ |
| 1        | **1234.14**          | 462.310            | 609.678            |
| 2        | **1477.96**          | 455.399            | 304.839            |
| 3        | **1698.16**          | 456.034            | 414.959            |
| 4        | **1473.51**          | 208.522            | 365.807            |
| 5        | **1587.68**          | 412.153            | 435.977            |
| 6        | **1573.94**          | 364.110            | 400.248            |
| 7        | **1326.10**          | 416.427            | 418.184            |
| 8        | **1600.72**          | 451.695            | 388.929            |
| 9        | **1314.49**          | 236.807            | 368.553            |
| 10       | **1387.69**          | 348.897            | 426.522            |
| 平均     | **1467.44**          | 381.235            | 413.370            |

### 测试环境

#### 本程序

| 项目            | 值                               |
| --------------- | -------------------------------- |
| alsologtostderr | false                            |
| minloglevel     | 3                                |
| 线程数          | 10                               |
| 分段大小        | 64M                              |
| 测试指令        | `./client "dl vtuber.flv v.flv"` |

#### HTTP

| 项目       | 值                                                           |
| ---------- | ------------------------------------------------------------ |
| 服务器程序 | Apache 2.4.46                                                |
| 客户端程序 | axel 2.17.10                                                 |
| 线程数     | 10                                                           |
| 测试指令   | `rm -f /home/kaaass/ssd/vtuber.flv && axel -n 10 -o /home/kaaass/ssd/ "http://127.0.0.1/~kaaass/vtuber.flv"` |

#### FTPs

| 项目       | 值               |
| ---------- | ---------------- |
| 服务器程序 | Pure-FTPd 1.0.49 |
| 客户端程序 | FileZilla 3.53.1 |

## 并发测试

脚本：`try_conn.sh`

指令：`./try_conn.sh $n`

服务器线程数：10

### 测试结果

| 打开连接 | 维持连接（5次平均） |
| -------- | ------------------- |
| 1        | 1.0                 |
| 10       | 10.0                |
| 100      | 100.0               |
| 1000     | 1000.0              |
| 5000     | 5000.0              |
| 10000    | 9996.2              |
| 11000    | 10992.8             |
| 15000    | 14987.0             |
| 20000    | 19991.0             |
